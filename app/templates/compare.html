{% extends 'base.html' %}
{% set show_header=true %}
{% set show_footer=true %}

{% block content %}
<div class="container mt-5 text-center vh-100">
    <h1>Comparativa de gyms</h1>

    <div class="d-flex justify-content-center align-items-center mb-4">
        <select name="gyms1" id="gyms1" class="form-select w-25 mx-3">
            <option disabled selected>Selecciona un gimnasio</option>
            {% for gym in gyms %}
            <option value="{{ loop.index0 }}">{{ gym.nombre }}</option>
            {% endfor %}
        </select>
        <h3 class="mx-3">V/S</h3>
        <select name="gyms2" id="gyms2" class="form-select w-25 mx-3">
            <option disabled selected>Selecciona un gimnasio</option>
            {% for gym in gyms %}
            <option value="{{ loop.index0 }}">{{ gym.nombre }}</option>
            {% endfor %}
        </select>
    </div>

    <div class="d-flex justify-content-around text-start">
        <div id="gym1-details">
            <h4 id="nombre1"></h4>
            <p><strong>Ciudad:</strong> <span id="ciudad1"></span></p>
            <p><strong>País:</strong> <span id="pais1"></span></p>
            <p><strong>Precio mensual:</strong> $<span id="precio1"></span></p>
            <p><strong>Saturación actual:</strong> <span id="saturacion1"></span>%</p>
            <p><strong>Ventilación:</strong> <span id="ventilacion1"></span></p>
            <p><strong>Estado de las máquinas:</strong> <span id="estado1"></span></p>
        </div>

        <div id="gym2-details">
            <h4 id="nombre2"></h4>
            <p><strong>Ciudad:</strong> <span id="ciudad2"></span></p>
            <p><strong>País:</strong> <span id="pais2"></span></p>
            <p><strong>Precio mensual:</strong> $<span id="precio2"></span></p>
            <p><strong>Saturación actual:</strong> <span id="saturacion2"></span>%</p>
            <p><strong>Ventilación:</strong> <span id="ventilacion2"></span></p>
            <p><strong>Estado de las máquinas:</strong> <span id="estado2"></span></p>
        </div>
    </div>
</div>
{% endblock content %}

{% block scripts %}
<script>
    const gyms = {{ gyms| tojson }};
    const select1 = document.getElementById('gyms1');
    const select2 = document.getElementById('gyms2');

    const details1 = document.getElementById('gym1-details');
    const details2 = document.getElementById('gym2-details');

    select1.addEventListener('change', function () {
        const gym = gyms[this.value];
        if (gym) {
            document.getElementById('nombre1').textContent = gym.nombre;
            document.getElementById('ciudad1').textContent = gym.ciudad;
            document.getElementById('pais1').textContent = gym.pais;
            document.getElementById('precio1').textContent = gym.precio_mensual;
            document.getElementById('saturacion1').textContent = gym.saturacion_actual;
            document.getElementById('ventilacion1').textContent = gym.ventilacion;
            document.getElementById('estado1').textContent = gym.estado_maquinas;
        }
    });

    select2.addEventListener('change', function () {
        const gym = gyms[this.value];
        if (gym) {
            document.getElementById('nombre2').textContent = gym.nombre;
            document.getElementById('ciudad2').textContent = gym.ciudad;
            document.getElementById('pais2').textContent = gym.pais;
            document.getElementById('precio2').textContent = gym.precio_mensual;
            document.getElementById('saturacion2').textContent = gym.saturacion_actual;
            document.getElementById('ventilacion2').textContent = gym.ventilacion;
            document.getElementById('estado2').textContent = gym.estado_maquinas;
        }
    });
</script>
{% endblock scripts %}